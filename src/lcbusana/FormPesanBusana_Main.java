/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package lcbusana;

import database.DataPesanBusana;
import decorationcomponent.RoundedButton;
import decorationcomponent.RoundedPanel;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;
import tools.Chooser;
import tools.FormatData;

/**
 *
 * @author apitf
 */
public class FormPesanBusana_Main extends javax.swing.JPanel {
    private Layout main;
    private Color warna;
    private String modelDesain = "";
    
    /**
     * Creates new form formPesanBusana
     */
    public FormPesanBusana_Main(JFrame frame) {
        initComponents();
        this.main = (Layout) frame;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        pnlForm = new RoundedPanel(50);
        lblJenisBusana = new javax.swing.JLabel();
        lblWarnaBusana = new javax.swing.JLabel();
        lblBahan = new javax.swing.JLabel();
        lblModel = new javax.swing.JLabel();
        cbJenisBusana = new javax.swing.JComboBox<>();
        txtBahan = new javax.swing.JTextField();
        btnWarna = new RoundedButton(20);
        btnModel = new RoundedButton(20);
        jPanel3 = new javax.swing.JPanel();
        btnBatal = new RoundedButton(10);
        btnNext = new RoundedButton(10);

        setBackground(new java.awt.Color(255, 255, 255));
        setLayout(new java.awt.GridBagLayout());

        jPanel1.setOpaque(false);
        jPanel1.setLayout(new java.awt.GridBagLayout());

        jLabel1.setFont(new java.awt.Font("Vladimir Script", 1, 36)); // NOI18N
        jLabel1.setText("Pesan Busana");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(20, 20, 0, 0);
        jPanel1.add(jLabel1, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.1;
        add(jPanel1, gridBagConstraints);

        pnlForm.setBackground(new java.awt.Color(207, 183, 146));
        pnlForm.setBorder(javax.swing.BorderFactory.createEmptyBorder(40, 40, 40, 40));
        pnlForm.setLayout(new java.awt.GridBagLayout());

        lblJenisBusana.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblJenisBusana.setText("Jenis Busana");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.2;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(lblJenisBusana, gridBagConstraints);

        lblWarnaBusana.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblWarnaBusana.setText("Warna");
        lblWarnaBusana.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.2;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(lblWarnaBusana, gridBagConstraints);

        lblBahan.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblBahan.setText("Bahan");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.2;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(lblBahan, gridBagConstraints);

        lblModel.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblModel.setText("Model/Desain");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.2;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(lblModel, gridBagConstraints);

        cbJenisBusana.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        cbJenisBusana.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Kebaya", "Gaun", "Tunik", "Jas", "Seragam" }));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weightx = 0.8;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(cbJenisBusana, gridBagConstraints);

        txtBahan.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        txtBahan.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtBahanKeyTyped(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weightx = 0.8;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(txtBahan, gridBagConstraints);

        btnWarna.setBackground(new java.awt.Color(255, 255, 255));
        btnWarna.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        btnWarna.setText("Pilih warna");
        btnWarna.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnWarnaActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.RELATIVE;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(btnWarna, gridBagConstraints);

        btnModel.setBackground(new java.awt.Color(255, 255, 255));
        btnModel.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        btnModel.setText("Upload Model");
        btnModel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnModelActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.RELATIVE;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(10, 10, 10, 10);
        pnlForm.add(btnModel, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.8;
        gridBagConstraints.insets = new java.awt.Insets(0, 20, 20, 20);
        add(pnlForm, gridBagConstraints);

        jPanel3.setOpaque(false);
        jPanel3.setLayout(new java.awt.GridBagLayout());

        btnBatal.setBackground(new java.awt.Color(207, 183, 146));
        btnBatal.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        btnBatal.setText("Batal");
        btnBatal.setBorderPainted(false);
        btnBatal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBatalActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(20, 20, 20, 20);
        jPanel3.add(btnBatal, gridBagConstraints);

        btnNext.setBackground(new java.awt.Color(207, 183, 146));
        btnNext.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        btnNext.setText("Berikutnya >");
        btnNext.setBorderPainted(false);
        btnNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(20, 20, 20, 80);
        jPanel3.add(btnNext, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.1;
        add(jPanel3, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        ImageIcon icon = new ImageIcon(getClass().getResource("/image/bg-form.png"));
        Image img = icon.getImage();
        g.drawImage(img, 0, 0, getWidth(), getHeight(), this);
    }
    
    private void btnBatalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBatalActionPerformed
        main.ubahPanel("dashboard");
    }//GEN-LAST:event_btnBatalActionPerformed

    private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextActionPerformed
        // Ambil nilai dari setiap input field
        String bahan = txtBahan.getText().trim();
        String jenisBusana = cbJenisBusana.getSelectedItem() != null ? cbJenisBusana.getSelectedItem().toString() : "";

        // Validasi apakah ada yang kosong
        if (bahan.isEmpty() || jenisBusana.isEmpty() || modelDesain.isEmpty() || warna == null) {
            JOptionPane.showMessageDialog(this, "Semua input harus diisi sebelum melanjutkan!", "Peringatan", JOptionPane.WARNING_MESSAGE);
            return; // ❌ Hentikan proses jika ada input yang kosong
        }
       
        // ✅ Jika semua input sudah terisi, Simpan data dan lanjut ke halaman berikutnya
        DataPesanBusana data= DataPesanBusana.getInstance();
        data.setJenisBusana(jenisBusana);
        data.setWarna(FormatData.colorToRGBString(warna));
        data.setBahan(bahan);
        data.setModelDesain(modelDesain);
        
        System.out.println(data.getIdPesananBusana());
        
        //Berpindah ke halaman selanjutnya Form Pesan Busana Ukuran
        main.ubahPanel("bukuran");
    }//GEN-LAST:event_btnNextActionPerformed

    private void btnWarnaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnWarnaActionPerformed
        warna = Chooser.chooseColor();
    }//GEN-LAST:event_btnWarnaActionPerformed

    private void txtBahanKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtBahanKeyTyped
        char c = evt.getKeyChar();
    
        // Jika tombol yang ditekan adalah Backspace, biarkan tanpa validasi
        if (c == KeyEvent.VK_BACK_SPACE) {
            return;
        }

        // Hanya menerima huruf (A-Z, a-z) dan spasi
        if (!Character.isLetter(c) && c != ' ') {
            evt.consume(); // Mencegah karakter tidak valid masuk
            JOptionPane.showMessageDialog(this, "Hanya huruf dan spasi yang diperbolehkan!", "Peringatan", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_txtBahanKeyTyped

    private void btnModelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnModelActionPerformed
        modelDesain = Chooser.chooseFile();
    }//GEN-LAST:event_btnModelActionPerformed

    public void clear(){
        cbJenisBusana.setSelectedItem(this);
        warna = null;
        txtBahan.setText(null);
        modelDesain = "";
    }
    
    public void isiDataEdit(){
        DataPesanBusana data = DataPesanBusana.getInstance();
        
        cbJenisBusana.setSelectedItem(data.getJenisBusana());
        warna = FormatData.rgbStringToColor(data.getWarna());
        txtBahan.setText(data.getBahan());
        modelDesain = data.getModelDesain();
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnBatal;
    private javax.swing.JButton btnModel;
    private javax.swing.JButton btnNext;
    private javax.swing.JButton btnWarna;
    private javax.swing.JComboBox<String> cbJenisBusana;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JLabel lblBahan;
    private javax.swing.JLabel lblJenisBusana;
    private javax.swing.JLabel lblModel;
    private javax.swing.JLabel lblWarnaBusana;
    private javax.swing.JPanel pnlForm;
    private javax.swing.JTextField txtBahan;
    // End of variables declaration//GEN-END:variables
}
